<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:EasySave.ViewModels"
             x:Class="EasySave.Views.JobSettingsView"
             x:DataType="vm:JobSettingsViewModel">

    <Grid VerticalAlignment="Center" HorizontalAlignment="Center" Margin="20" MaxWidth="500" MinWidth="400">
        <Border Background="{DynamicResource CardBackgroundBrush}" BorderBrush="{DynamicResource BorderMediumBrush}" BorderThickness="1" CornerRadius="8" Padding="25">
            <StackPanel Spacing="15">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="10" Margin="0,0,0,10">
                    <TextBlock Text="ðŸ“" Classes="emoji" FontSize="24" VerticalAlignment="Center"/>
                    <TextBlock Text="{Binding T_job_settings}" FontSize="22" FontWeight="Bold" Foreground="{DynamicResource TextPrimaryBrush}" VerticalAlignment="Center"/>
                </StackPanel>

                <StackPanel Spacing="5">
                    <TextBlock Text="{Binding T_job_name}" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="12" FontWeight="SemiBold"/>
                    <TextBox Text="{Binding Name, Mode=TwoWay}" Watermark="{Binding T_example_job_name}" Background="{DynamicResource ControlBackgroundBrush}" BorderBrush="{DynamicResource BorderMediumBrush}" Foreground="{DynamicResource TextPrimaryBrush}" CornerRadius="6" Height="40" VerticalContentAlignment="Center"/>
                </StackPanel>

                <StackPanel Spacing="5">
                    <TextBlock Text="{Binding T_source_folder}" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="12" FontWeight="SemiBold"/>
                    <Grid ColumnDefinitions="*, Auto">
                        <TextBox Grid.Column="0" Text="{Binding Source, Mode=TwoWay}" Watermark="{Binding T_source_path}" Background="{DynamicResource ControlBackgroundBrush}" BorderBrush="{DynamicResource BorderMediumBrush}" Foreground="{DynamicResource TextPrimaryBrush}" CornerRadius="6" Height="40" VerticalContentAlignment="Center"/>
                        <Button Grid.Column="1" Click="SelectSource_Click" Margin="10,0,0,0" Background="{DynamicResource ButtonBackgroundBrush}" CornerRadius="6"><TextBlock Text="ðŸ“‚" Classes="emoji"/></Button>
                    </Grid>
                </StackPanel>

                <StackPanel Spacing="5">
                    <TextBlock Text="{Binding T_target_folder}" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="12" FontWeight="SemiBold"/>
                    <Grid ColumnDefinitions="*, Auto">
                        <TextBox Grid.Column="0" Text="{Binding Destination, Mode=TwoWay}" Watermark="{Binding T_target_path}" Background="{DynamicResource ControlBackgroundBrush}" BorderBrush="{DynamicResource BorderMediumBrush}" Foreground="{DynamicResource TextPrimaryBrush}" CornerRadius="6" Height="40" VerticalContentAlignment="Center"/>
                        <Button Grid.Column="1" Click="SelectDestination_Click" Margin="10,0,0,0" Background="{DynamicResource ButtonBackgroundBrush}" CornerRadius="6"><TextBlock Text="ðŸ“‚" Classes="emoji"/></Button>
                    </Grid>
                </StackPanel>

                <Separator Height="1" Background="{DynamicResource BorderMediumBrush}" Margin="0,5"/>

                <TextBlock Text="{Binding ErrorMessage}" 
                           Foreground="{DynamicResource DangerTextBrush}" 
                           FontSize="12" 
                           FontWeight="Bold"
                           HorizontalAlignment="Center"
                           TextWrapping="Wrap"
                           IsVisible="{Binding ErrorMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>

                <Grid ColumnDefinitions="*, *" Margin="0,10,0,0">
                    <Button Grid.Column="0" Content="{Binding T_cancel}" Command="{Binding CancelCommand}" HorizontalAlignment="Stretch" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Height="45" Margin="0,0,10,0" CornerRadius="6" Background="Transparent" BorderBrush="{DynamicResource BorderMediumBrush}" BorderThickness="1" Foreground="{DynamicResource TextSecondaryBrush}" FontWeight="Bold" Cursor="Hand"/>
                    <Button Grid.Column="1" Content="{Binding T_save}" Command="{Binding SaveCommand}" HorizontalAlignment="Stretch" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Height="45" Margin="10,0,0,0" CornerRadius="6" Background="{DynamicResource PrimaryActionBrush}" Foreground="{DynamicResource TextInvertedBrush}" FontWeight="Bold" Cursor="Hand"/>
                </Grid>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>